历七
回回历法一
《回回历法》，是西域默狄纳国王马哈麻所制订。
那个地方北纬二十四度半，西经一百零七度，大约在云南西面八千多里。
历法计时的起点用隋开皇己未年，也竞是该国建国的那一年。
洪武初年，从元大都得到这种历书。
十五年秋，太祖认为西域推算天象最精确，其五星纬度中国又役有，就命令翰林李种、昊伯宗和回回大师马沙亦黑等翻译这本书。《回回历法》不用闰月，以三百六十五日为一年。每年分十二宫，有的宫内有闰日，大凡一百二十八年宫闰三十一日。以三百五十四日为一周，每周十二个月，有的月有闰日，大凡三十年月闰十一日。
经过一千九百四十一年，宫、月、日、辰再次会合。这就是《回回历法》立法的要点。
按西域历法数术见于史籍的，在唐代有《九执历》，元有札马鲁丁之《万年历》。
《九执历》最粗疏，《万年历》实行不久。
只有《回回历》设了科，隶属于钦天监，与《大统历》参互使用了二百七十多年。
虽然对于日食月食的有食亏的多少，不时有些出入，但远逮胜过《九执历》、《万年历》了。
但这种书有很多脱落讹误。
大概那些隶属于台官的人，都用沙盘推算，就用他们本国的书。
而明代学习《回回历》的，如唐顺之、陈壤、袁黄等人的论著，又自成一家之言。
因此译本不流行于世，这些害的残缺也就是很自然的了。
现在为此广泛地访问有专长的传人，考究原书，以补充它的脱落，纠正它的讹误，写成《回回历法》，载入志中。
累积年数：从西域阿喇必年，堕旦皇己未年。起，往下到洪武甲子年，共七百八十六年。
使用的基本数据：天一周三百六十度。
宫度从白羊起，节气以春分为首，时间从午时后段开始。午时前段四刻属于前一天。七曜的序数：日为一，月为二，火星为三，水星为四，木星为五，金星为六，土星为七。
以七曜纪日，不用甲子。宫的序数：白羊为初，金牛焉兰，阴阳为二，巨蟹为三，狮子焉四，双女为五，天秤为六，天蝎为七，人马为八，磨羯为九，实瓶焉十，双鱼为十一。
各宫日数：白羊戌宫三十一日。
金牛酉宫三十一日。
阴阳申宫三十一日。
巨蟹未宫三十二日。
狮子午宫三十一日。
双女巳宫三十一日。
天秤辰宫三十日。
天蝎卯宫三十日。
人马寅宫二十九日。
大月三十日，小月二十九日，共三百五十四日，这是十二个月的日数。
遇到月份有闰月的年份，就在第十二个月内增加一日，共三百五十五日。
太阳五星最高行度：太阳在二宫二十九度二十一分。
土星在八宫十四度四十八分。
木星在六宫初度八分。
火星在四宫十五度四分。
金星在二宫十七度六分。
水星在七官六度十七分。
求月分闰日：朔的余日。以西域历法本年以前的积年，减一，乘以一百三十一，用总数来乘。再加一百九十四，闰应。除以三十，余数在十九以上，闰限。这年的月份有闰日，十九以下就没有闰日。
除得的商，满七就去掉，剩下的就是所求的这一年第一月第一天的七曜数。
为实际相距年己未年至今的得数。另一种算法：用气积宫闰加通闰为气积。减月闰，用十一乘距历元的年数，再加十四，除以三十，即得到月闰数。除以三百五十四，余数城去洪武年的加次二十四，又减去补充的日数二十三，又减改闰应减少的一日，得数和前一种算法一样。
求通闰，用十一日，乘以距历元的年数。
因为数据表中的运行度数，都是本年本月本日的实足数字。如果求十年而用十年的数据，就超过了实数。月和日的道理舆此相同。以下仿此。
求最高的度数：将求到的最远总度数，加上测定到的太阳的最远运行度数，二宫二十九度二十一分。就是所求年份白羊宫的最速运行度数。
如果要求下一宫，就累加五秒零六微。
如果求下一月，就累加四秒五十六微。
求中心运行度数：太阳平均运行度数。将积年代入总年零年月日数据表中，各取太阳的中心运行度数相加，取法同前。再减一分四秒，就得到白羊宫第一日的中心运行度数。
求各宫每月每日的度数，按每日运行度数五十九分八秒累计相加。
减一分四秒，有人说是西域距离中原的里程差异，不对，是己未年的宫分最后一天的度应。求自行度数：将某日的中心运行度数，减所在宫的最远运行度数，就可以得到。
即代入求盈缩差的度数。
求加减差：即盈缩差。以自行度的宫分度数焉引数，代入太阳加减数据表内，照自变量的宫分度数取加减差。
这叫未定差。其度下的小余，用比例法，以本度的加减差，舆后一度的加减差相减，余数化为秒，如一分化为六十秒。与自变量的小余也化为秒相乘，得数为纤，秒乘秒，得纤。按六十进制，进为微、秒、分。
后面以此为准。
求经度：黄道度。
设置日中心行度，用加减定差分加减它，视定差引数自行宫度，在初宫至五宫为减定差分，六宫至十一宫为加定差分。即得。
求七曜：将积年代入数据表内，取总年零年月日下的七曜数相加，除以七，余数即所求年白羊宫第一日的七曜数。
如果求下一宫，就加上各宫的七曜数。
如果求每一天，就逐次加一，满七就减去。
求月亮、五星、罗计七曜同此。太阴行度
求中心运行度数：将积年代入数据表内，取总年零年月日下的中心运行度数相加，得数再减十四分，己未年的应转数。就是所求年份白羊宫第一日的中心运行度数。
如果要求每一天的，就逐次加上每日的运行度数。
十三度一零三五。求加倍相离度：月亮在小轮上运行，舆太阳运行到同宫同度后，又相分离。将积年代入数据表内，取总年零年月日下的加倍相离度相加，再减二十六分，就是所求的白羊宫第一日的度数。
如果要求每一天的，就累计和太阳的加倍相离度数。
二十四度二二五三二二，折半，就是小轮心距离太阳的度数。求本轮运行度数：即月亮运转的度数。将积年代入数据表内，取总年零年月日下本轮运行度数相加，再减十四分，就是所求白羊宫第一日的度数。
如果要求每一天的，就累计每一天的本轮运行度数。
十三度三分五四。求第一加减差：又叫倍离差。以加倍相离宫分度数为自变量，代入月亮第一加减数据表内，取加减差。
未定差。又与下一个数的加减差相减，余数乘以引数的小数，得数为秒，分乘以分。按六十进制为分，用来加或减未定差，后一个数的未定羞多就相加，少就相减，和太阳一样。得到第一差分。
求本轮行定度：将某一天的本轮运行度数，舆第一差分相加或相减。
看倍离度，前六宫加，后六宫减。求第二加减差：以本轮行定度为引数，代入月亮第二加减数据表内，取未定差，按照比例法，同前。求得零数相加或相减，得到第二加减差分。
根据引数，六宫以前为减，六宫以后为加。求比数分：将加倍相离度的宫分度数，代入第一加减数据表内，取比数分。
如倍离度零分在三十分以上的，取下一度的比数分。
求远近度：以本轮行定度的宫分度数为引敷，代入月亮第二加减差数据表内，取远近度分。
其自变量零分，也依比例法取数。
求泛差定差：取比敷分，将远近度化成分与之相乘，除以六十换算为分，就是泛差。
将泛差与第二加减差相加，就是定差。
求经度：将某一天月亮的中心运行度数，与定差相加减，就是月亮的经度。
根据本轮的行定度，六官以前焉减，六宫以后焉加。太阴纬度
取相应的数据，按照比例法求得零数相加或相减，上升值的六宫相加，下降值的六宫相减。得到纬度的度数。
引数在六宫以前为黄道北，在六官以后为黄道南。求计都、罗喉的运行度数：将积年代入总年零年月日数据表内，取计都、罗喉的中心运行度数相加，为这一年白羊宫第一日的运行度数。
求各宫的第一日，以各宫的日运行度数相加，与十二官相减，余数就是所求的这一宫第一日计都的运行度数。
如果要求计都每天的具体运行度数，将前后两段的运行度数相减，余数除以相距的数，就是日差。
又将前段的计都运行度数，逐次减去日差。
如求罗喉的逼行度数，将某日的计都运行度数加上六宫。
五星经度
求最高总度数：数据同太阳，按照前面求太阳的方法求取。
求最高行度：将所求的星的最辽总度数，加上测定的此星的最远运行度数，见前面。就是这一年白羊宫的最速运行度数。
求各官各日的，加上各宫各日的运行度数。
求每天的中心运行度数：按照求太阳度数的方法求取。
求自行度数：将积年代入数据表总年零年月日之下，各取自行度数相加，得到这一年白羊宫第一日的自行度数。
土、木、金三星减一分，水星减三分，火星不减。
如求各宫各日，按照所求的星自行度数逐次累计。
水星的自行度数如果遇到第三宫的初度，就以五日作为一段计算，到了第九宫的初度，就以十日作为一段计算。纬度也是这样。
求中心运行度数和小轮心度数：就是入历度五星本轮。土、木、火三星，用太阳中心运行度数，减去这些星的自行度数，就是这三颗星的中心运行度数。
其中又减去最速运行度数，就是三颗星的小轮心度数。
金、水二星，它们的中心运行度数就是太阳的中心运行度数，其中减去遣二星的最远运行度数，余数就是它们的小轮心度数。
如果不够减，就加十二宫再减。求第一加减差：盈缩差。以某星的小轮心度数为引数，代入这颗星的第一加减数据表，按照比例法求。
方法同太阳、月亮。求自行定度及小轮心定度：根据第一加减差的引数，在初宫至第五宫，用加减差，加自行度数，减小轮心度数，就成为各宫的定度。
在第六宫至第十一宫，用加减差，减自行度数，如小轮心度数，就成为各宫的定度。
求第二加减差：将某星的自行定度，代入本星的第二加减数据表内，提取度数，用比例法加或减。
同前。
求比数分：如果是土、木、金、水星，就将本星的小轮心定度，代入第一加减数据表内，取比数分数据。如果自变量的小数在三十分以上，就取后一行的比数分数据。
如果是火星，就必须用比例法求取。
求远近度：将自行定宫度，代入第二加减数据表内，取远近度，按照比例法求取。
求泛差定差：方法同月亮。
求经度：取小轮心定度，用定差加或减，根据引数的定数，在六宫以前相加，六宫以后相减。
又以自变量的宫分度数，缄去数据表内同宫的相近度数，与前后相减，余数化成分相乘，用六度来除，数据表每行相差六度。
再按六十分进位，与前面所取的顺留表内的数据相加，或与前面所取的退留表内的数据相减，得数与该星的日自行定度相同的，本日就会停留。
如果自行定度多的，就已过了停留的时间，少的就没有到停留的时间。
如果想得到详细的数据，以所得到的数据与各星的日自行定度相减，余数用各星的一日自行定度相约，如土星一日的自行定度为五十七分多等。就得到停留时间在本日前后的数据。
土星停留七天，在它停留时间的前三天和后三天，都与停留时间的数据相同。木星停留五天，在它停留的前两天和后两天，都与停留时间的数据相同火、金、水三星不停留，后退了就前行，前行了就后退，只是在运行度数极小时有停留。
求精细运行数：土、木、金、火四星，以前后两段的经度相减，除以相距的日数，就是每日运行的分数。水星以白羊官第一日的经度，又与前一日的经度相减，余数为第一日的运行分数。
又将前后两段的经度相减，余数除以相距的日数，就是平均日运行分数。
与第一日的运行分数加或减，再乘以二，用前段前一日与后段相差的日数去除，就是日差。
用以加或减第一日的运行分数，第一日的运行分数少于平均运行分数就加，多就诚。
就是所求日的运行分数。五星各用前段经度，用每天的运行分数顺行依次加，逆行依次减，就得到各星逐日的经度。
求伏见现：比照各星自行定度，在隐现数据表限度以上的，就会早晨隐去傍晚出现。
五星纬度：求最远总运行度数、中心运行度数、自行度数，小轮心度数，都按照求五星经度的方法求取。
求自行定度：将自行度的宫分乘以十就是度。
如第一宫，乘以十得十度，这是用约法折算，以制定纬度数据表。度数乘以二十就是分，分满了六十就进位焉度。
分也乘以二十就是秒，秒满了六十就进位为分。将度、分、秒相加就得到要求的数。求小轮心定度：将小轮心的宫分乘以五就是度。如第一宫乘以五，就得到五度。
度数乘以十就是分，分满了六十就进位为度。
分也乘以十就是秒，秒满了六十就进位为分。
将度、分、秒相加就得到要求的数。
求纬度：将小轮心定度和自行定度，代入本星纬度数据表中雨相结合取得数据，一纵一横交叉。
得到数据后与后一行的数据相减。如果遇到交黄道的，舆后一行相加。又以小轮心定度，舆数据表中的小轮心定度相减，最上面的横行。两次相减的余数相乘，再用数据表中小轮心度的累加数相除。
满六十进制焉分。再与前面暂时寄放的数字相加或相减，如果纵横交叉取得的数多于下一行的就减，少的就加。如果遇到交黄道的，所得的数据多于前面暂时寄存数的，就在所得数据中减去寄存数，剩下的就是交遇黄道的南北分数。就得到黄道南北纬的度数。
求纬度详细运行数：将某星前段的纬度，舆后段的纬度相减，余数除以相距的日数，就是日差。
将前段的纬度，按日差顺行依次加，逆行依次减，就得到每一天的纬度分。
如果前后段有南纬北纬的不同，将该星前后段的纬度相加，以相距的日数来除，就是日差。
将前段纬度，用日差依次相减，到不够减时，用日差来减这个数，所得余数用日差依次相加，就得到每一天的纬度。
推算日食的方法：推算日食的各个数据，如中午前日月合朔，用前一天的数据推算，如中午后日月合朔，用后一天的数据推算。辨别是否发生日食的界限：根据日月合朔时月亮的纬度，在黄道以南四十五分以下，黄道以北九十分以下，将有日食。
如果日月合朔在白天，就能完全看见日食。
如果合朔在太阳升起前三时及太阳已落后十五分，一时的四分之一。都有带食。
如果合朔在晚上的不算。
求食甚的时间：即日月合朔。
将正午时月亮超过太阳的度数，计算方法见后面月食时月亮每一时刻超过太阳的度数。化为秒，乘以二十四作为被除数，将月亮的日行度数，减去太阳的日行度数，化为秒作为除数，二者相除即是时数时以下的零数乘以六十化为分，分以下的零数乘以六十化为秒，三十秒以上收为一分，六十分收为一时，加起来就是食甚的时间。
求日月合朔时太阳的经度：将食甚时间化成分，将太阳的日行度数化成秒与之相乘，再处以二十四即得到微，满六十进制为秒为分，再用以加或减正午时太阳的度数，正午前日月合朔相减，正午后相加。得到合朔时太阳的经度。
也就是食甚时太阳运行的黄道度数。求加减分：将日月合朔时太阳的富分度数，代入昼夜加减数据表内，取加减分，依比例法求取。
求午夜至日月合朔的时分秒：将食甚的时间，用加减分加或减，正午前合朔相减，正午后相加。再加或减十二时，正午前合朔减十二时，正午后加十二时。就得到午夜至合朔的时分秒。
按漠历规定时间从午夜算起，就改变方法以与《大统历》相合，这并不是《回回历》本来的方法。求第一东西差：经度差。将日月合朔时太阳所在的宫分在数据表经纬时加减数据表。上七官取右行的时数，顺行。在下七宫取左行的时数，逆行。用午夜至合朔的时间，取经度差，按比例法求取，只用时以下的小数求取。
下同。就是第一东西差。
求第二东西差：将日月合朔时太阳所在的宫分在数据表中，同上。取下一官午夜至合朔时的经度差，按比例法求取，就是第二东西差。
求第一南北差：纬度差。将日月合朔时太阳所在的宫分及午夜至合朔的时间代入数据表内，同上。取纬度差，按比例法求取，就是第一南北差。
求第二南北差：以日月合朔时太阳的官分，取下一宫午夜至合朔时的纬度差，按照比例法求取，就是第二南北差。
求第一时差：将日月合朔时太阳的宫分及午夜至合朔的时间，代入数据表中取时差，按照比例法求取。
求第二时差：以日月合朔时太阳的宫分，取下一宫午夜至合朔时的时差，按照比例法求取。
求日月合朔时的东西差：用第一东西差和第二东西差相减，余数化为秒，乘以合朔时太阳的度数，也化为秒。用三十度相除得到纤数，再按六十进制为微、秒、分，用来加或减第一束西差，第一束西差少于第二东西差的加，多的减，下冈。
就是日月合朔时的东西差。求日月合朔时的南北差：用第一南北差和第二南北差相减，余数化为秒，再乘以太阳的度数，用三十相除得到纤数，按比率进位为微、秒、分，再加或减第一南北差，就是日月合朔时的南北差。
求日月合朔时的时差：用第一、第二两个时差相减，乘以太阳的度数，除以三十，按比率进位，再加或减第一时差，就是日月合朔时的时差。
求日月合朔时本轮的运行度数：将本轮的日运行度数十三度四分化为分，乘以食甚的时间，也化为分。除以二十四得到秒，按照比率进位为分、度，用以加或减正午本轮运行度数，正午前减，正午后加。就是合朔时的运行度数。
求比数分：将本轮运行度数代入数据表，太阳、月亮昼夜时行影径数据表。取同宫相近度数月亮的比数分，按照比例法求取。
求东西定差：将合朔时的东西差化为秒，再将比数分化为秒与之相乘得到纤数。按六十进制为微、秒、分，再加合朔时的东西差，只有加，没有诚。就是定差。
求南北定差：方法同东西定差。
求食甚定时：即食甚定分。根据某日日月合朔的时间，太阳的运行度数在数据表经纬时差加减数据表。左面七宫时，时差黑字减，白字加，在右面七宫时，白字减，黑字加，都加减从午夜到合朔的时间，得数按漠历时间从午夜算起的规定减去十二，得到某时的初步整时。
余数化为秒，乘以一千，再除以一百四十四，六十分为一时，每日一千四石四十分，所以乘以一千，又除以一百四十四。按六十进制，满一百为一刻，就是食甚定时。
求食甚时月亮的经度：在日月合朔时太阳的经度内，加或减东西定差，就得到食甚时月亮的经度。
其加或减根据食甚定时时差的加减。求日月合朔时计都的度数：将食甚时间化为分，将计都的日行度数三分十一秒化为秒与之相乘，除以二十四得到微，满六十进制为秒、分，用来加或减这一天正午时计都的运行度数，罗喉、计都逆行，午前合朔相加，午后相减。就是合朔时计都的度数。
求日月合朔时月亮的纬度：将食甚时月亮的经度，加或减合朔时计都的度数，余数为计都与月亮的相离度，再代入月亮纬度数据表中查取。
求食甚时月亮的纬度：将南北定差加或减合朔时月亮的纬度，在黄道南相加，在黄道北相减。
得到食甚时的纬度。
求日月合朔时太阳的自行度数：将太阳的日行度数五十九分八秒化为秒，乘以食甚的时间，也化为秒。除以二十四，得数为微，满六十进制焉秒、分，再加或减这一天正午的自行度数，正午前合朔相减，正午后合朔相加。
得到合朔时的自行度数。求太阳径分：以合朔时太阳的自行度数焉引数，代入数据表影径分数据表。内同官相近的度数内，取太阳径分，按照比例法求取。
求月亮径分：以合朔时本轮运行度数为引数，代入数据表同上。内，取同宫相近度数月亮的径分，按照比例法求取。
求二半径分：将太阳、月亮二者的径分相加，除以二。
求太阳食限分：将二半径分，减食甚时月亮的径分，剩余数是太阳发生日食的界限。
如不够减就不会发生日食。如果月亮役有纬度的，就发生日全食。如果月亮没有纬度而太阳径分大于月亮径分的，发生日环食。求太阳食甚定分：将太阳食限分化为秒，乘以一千作为被除数，将太阳径分化为秒作除数相除，按一百进位为分，就是太阳食甚定分。
求时差：即定用分。将食甚时月亮的纬度化为秒自乘，二半径分也化为秒自乘，两个得数相减，余下的数开平方，再乘以二十四作为被除数，将这一天月亮的日运行度数减太阳的日运行度数化为分作为除数。
两数相除，得数为分，满六十分为一时，就是时差。
求初亏：将食甚定时，减去时差，余数按汉历时间从午夜算起的规定减去十二，得到初步的整时。
余下的分化为秒，乘以一千，除以一百四十四，按六十进制为分，满一百分为一刻，就是初亏的时刻。
求复圆：将食甚定时，加上时差，时间按汉历规定从午夜算起，如同求初亏的方法，得到复圆的时刻。
求初亏、食甚、复圆的方位：与《大统历》方法相同。
推算月食的方法：推算月食的各种数据，正午以前望的，用前一天的推算，正午以后望的，用第二天的推算。辨别是否发生月食的界限：在望日月亮的经度和罗喉或计都的度数相距在十三度以内，月亮的纬度在一度八分以下，会发生月食。
又合望发生在月亮没有出来前二时，没有降下前二时，都有带食。
那些在二时以上的不计在内。
将这一天月亮的经度，减去前一天月亮的经度，如果是在午后望的，减第二天月亮的经度。余数是月亮的日运行度数。又将这一天正午太阳的经度，减去前一天正午太阳的经度，如果在午后望的，减第二天太阳的经度。余数是太阳的日运行度数。
两个日运行度数相减，余数化为秒作为除数，与被除数相除，得数为时。
时下的小数，按六十化为分、秒，就是所求的食甚时间。
求食甚畴月亮距离黄道的宫分度数：将食甚的时间，与太阳日运行度数都化为秒相乘，除以二十四，得数为纤。满六十进制为微、秒、分，用来加或减这一天正午太阳的经度，午前望减，午后望加。就是望时太阳的经度。加上六宫，就是所求的月亮的度数。
求昼夜加减差：以望时太阳的宫分度数为引数，代入昼夜加减数据表内，取加减分，按照比例法求取。
求食甚定时：将食甚的时间，与昼夜加减差加或减。
午前望减，午后望加。得数加或减十二时，如午后望加十二时，午前望与十二时相减。
按汉历规定时间从午夜算起，得到初步的整时。其余小数，按比率进位焉刻，方法详见日食。
得到定时。
求望时计都的度数：将食甚的时间，化为秒作为被乘数，将计都的日运行度数三分十一秒化为秒与之相乘，除以二十四，得数为纤。按六十进位焉微、秒、分，再加或减这一天正午计都的运行度数，罗喉、计都逆行，午前望加，午后望减。
就得到了。求望时月亮的纬度：将食甚时月亮距离黄道的度数，减去望时计都的度数，如不够减，加十二宫再喊。余数为计都与月亮相离的度数，再代入月亮纬度数据表中查取。
求望时本轮的运行度数：即列入月亮迟疾历表的。将月亮本轮日运行度数，十三度四分。化为分，用食甚时间化为秒与之相乘，再除以二十四得到微，按六十进制为秒、分、度，再加或减逭一天正午的本轮运行度数，午前望减，午后望加。
就得到了。求月亮径分：将望时本轮运行的宫分度数，代入影径分数据表中求取。
方法详见日食。求月亮影径分：将望时本轮运行的宫分度数，代入影径分数据表中查取。
求望时太阳自行度数：将太阳日运行度数五十九分八秒和食甚时间都化为秒相乘，除以二十四，得数为纤。满六十进制为微、秒、分，再加或减这一天正午太阳的自行度数。
方法同日食求太阳经度。求影减差：以某日太阳自行的宫分度数为自变量，代入影径数据表肉，在同宫相近的度数取月亮影径差分，按照比例法求取。
方法详见前面。求影径定分：将月亮的影径分，减去影径减差分。
求二半径分：将月亮径分，加影径定分，除以二。
求月亮是否发生月食的界限：将二半径分，诚去望时月亮的纬度。
如不够减，就不会发生月食。求食甚定分：将发生月食界限的数据化为秒，乘以一千作为被除数，将月亮径分化为秒作为除数相除，按一百进位焉分，就是食甚定分。
求月亮每时超过太阳的度数：将月亮望时的经度，减去前一天月亮的经度，又将望时太阳的自行度数，减去前一天太阳的自行度数，将这两个余数相减，就是月亮昼夜超过太阳的度数。
化为秒除以二十四，满六十进制，就得到每一时超过太阳的度数。
求时差：将月亮的纬度数，化为秒自乘，又将二半径分化为秒自乘，两数相减，剩余数开平方作为被除数，将月亮每时超过太阳的度数化为秒作为除数相除，得数就是时差。
就是初亏至食甚的实际时间。求初亏复圆的时刻：以时差减食甚定时，得到初亏的时刻。
加食甚定时，得到复圆的时刻。
规定时间从午夜算起、进位为刻的方法，都与日食相同。
求食既至食甚的时差：将二半径分，减月亮径分，化为秒自乘，又将月亮纬度也化为秒自乘，两数相减，再开平方作为被除数。
将月亮每时超过太阳的度数化为秒作为除数与之相除，得数就是时差。
求食既生光的时刻：将食既至食甚的时差，减去食甚定时，就是食既的时刻。
加食甚定时，就是生光的时刻。
求初亏食甚复圆方位：与《大统历》方法相同。
求太阳出入的时间：以正午太阳的经度为引数，代入西域昼夜时数据表中，取出度数，按照比例法求取，得到未定分。
又在自变量相对的官度内，查取度分，如初官三度，就在六官三度查取。也按照比例法求取，得到后未定分。
两个未定分相减，如不够减，加三百六十度再减。余数化为秒，除以十五，按六十进制焉分、时，就得到逭一天白天的长度。
折半就是这一天日出到正午半个白天的长度。
用十二时减半个白天的长度，余数就是日出的时刻，加十二时，就是日落的时刻。
求日月出入带食的时间：将某日日出的时间，加上日落的时间，如果多于初亏的时间，少于食甚定时和复圆的时间，就有带食。
将这一天日出或日落的时间，与食甚定时时间相减，余数就是带食差。
将日月食甚定分，用带食差化为秒与之相乘，再用时差化为秒与之相除，得数就是带食分。
在食甚定分内减去带食分，余数就是日月带食能见到的时间。
求月食发生时的更和点：在二十四时内，减去白天的时间，又减去早晨黄昏的时间，七十二分，就是汉历的五刻弱。
剩下的就是夜晚的时间，化为秒除以五就是每更的时间。
更除以五就是每点的时间。如果月食在午夜以前，将初亏食甚复圆等时间，减去日落的时间，又减去早晨黄昏时间的一半，三十六分。余数化为秒，用一更的时间去减，就得到更的序数。
不够一更时间的，用一点的时间去减，就得到点的序数。
月食在午夜以后的，用夜时的一半，加初亏食甚复圆等时间，用一更的时间去减，就得到更的序数。
不够一更时间的，用一点的时间去减，就得到点的序数。
都规定从初更、初点开始。
喊去一更的时间，减一次为一更，剩下不足一更的时间，也虚算为一更。求点法同上。太阴五星凌犯求月亮昼夜的运行度数：将本日的经度和次日的经度相减，余数就是本日昼夜的运行度数。
求月亮早晨黄昏的度数：将这一天正午月亮的经度，加上数据表月亮出入晨昏加减数据表。中这一天黄昏时的加差，就是这一天月亮黄昏时的经度。
将第二天正午月亮的经度，减去数据表中本日早晨的减差，就是遭一天月亮早晨的经度。
求月亮出入时的度数：将这一天正午月亮的经度，加数据表内即上面的数据表这一天月落的加差，就是这一天月落时的月亮经度。
加上数据表内这一天月出的加差，就是这一天月出时月亮的经度。
求月亮所冲犯的星座：朔日后比较月亮黄昏经度和月落经度，望日后比较月出经度和月亮早晨的经度，代入黄道南北各像星数据表内，经纬度相近在一度以下的，就选取。
求冲犯星座的时刻：将逭一天正午月亮的经度，与取到的各像星座的经度相减，化为分，乘以二十四，用月亮昼夜的运行度数也化为分。相除，得到初步的整时。
那些小数，按六十化为分，乘以一千，除以一百四十四，按一百进位为刻，就得到所求的时刻。
求上下相离的度数：将月亮的纬度与所冲犯的星座的纬度相减，余数就是上下相离的度数。
如果月亮和星座同在黄道以南，月亮纬度多焉下离，月亮纬度少为上离。
如果同在北，月亮纬度多为上离，周亮纬度少为下离。
如果南北不同，月亮在北为上离，月亮在南为下离。
求五星冲犯各星相离的度数：将这一天五星的经纬度，代入黄道数据表内，比较各像内外星的经纬度，在一度以下的选取。
将五星纬度与各星纬度相减，余数就是上下相离的度数。
求月亮冲犯五星、五星相互冲犯：比较月亮的经纬度和五星的经纬度，相近在一度以下的，选取。
