◎历七
▲回回历法一
《回回历法》，西域默狄纳国王马哈麻所作。
其地北极高二十四度半，经度偏西一百零七度，约在云南之西八千馀昊。
其历元用隋开皇己未，即其建国之年也。
洪武初，得其书於元都。
以三百五十四日为一周，周一十十月有闰日。凡有闰闰凡百二十八年而而宫闰三十一日，以三百五十四日为一周，周十二月，月有闰日。
凡三十年月闰十一日，历千九百四十一年，宫月日辰再会。此其立法之大概也。
按西域历术见於史者，在唐有《九执历》，元有札马鲁丁之《万年历》。
《九执因》最疏，《万年历》行之未久。
唯《回回历》设科，隶钦天监，与《大统》参用二百七十馀年。
虽於交食之有无深浅，时有出入，然胜於《九执》、《万年》远矣。
但其书多脱误。
盗盖其人之隶籍台官者，类以土盘布算，仍用其本国之书。
而明之习其术者，如唐顺之、陈壤、袁黄辈之所论著又自成一家言。
以故翻译之本不行於世，其残缺宜也。
今为博访专门之裔，考究其原书，以补其脱落，正其讹舛，为《回回历尖》，著於篇。
积年起西域阿喇必年，下至洪武甲子，七百八十六年。
用数天周度三百六十。
七曜数日一，月二，火三，水四，木五，金六，土七。
宫数白羊初，金牛一，阴阳二，世蟹三，狮子四，变女五，天秤六，天蝎七，人马八，磨羯九，实宝瓶十，变鱼十一。
宫日白羊戌宫三十一日。
金牛酉宫三十一日。
阴阳申宫三十一日。
巨蟹未宫三十二日。
狮子午宫三十一日。
娈女巳宫三十一日。
天秤辰宫三十一日。
天蝎卯宫三十日。
人马寅宫二十九日。
磨羯丑宫二十九日。宝瓶子宫三十日。
变鱼亥宫三十日。月分大小单月大，变月小。
太阳五星最高行度太阳二宫二十九度二十一分。
土星八宫十四度四十八分。
木星六宫初度八分。
火星四宫十五度四分。
金星二宫十七度六分。
水星七宫六度十七分。
求月分闰日置西域岁前积年，减一，以一百三十一年乘之，内加一百九十四，以三十为法屡减之，馀在十九已上，其年月分有闰闰已下则无。
於除得之数，满七去之，馀即所求年第一月一日七曜。
加次法置积日，减月闰内加三百三十一日，以三百五十四除之，馀数内减去所加三百三十一，又减二十三，又减二十四，又减一，为实距年得数。又法：以气积内减月闰，以三百五十四除之，馀减洪武加次二十四，又减补日二十三，又减改应损日一，得数如前。
▲太阳行度
求最高总度置西域岁前积年，入总年零年月分日期立成内，各取前年前月前日最高行度并之。
求最高行度置求到最高总度，加测定太阳最高行度，即年求年白羊宫最高行度。
如求次宫，累加五秒零六微。
求次月，加四秒五十六微。
求中心行度置积年入总年零年月日立成内，各取日中心行度并之，内减一分四秒，即所求白羊宫第一日中心行度。
求各宫月日，按每日行度累加之。
求自行度置其日中心行度，减其宫最高行度，即得。
求加减差。
以自行宫度为引数，入太阳加减立成内，照引数宫度取加减差。
其度下小馀，用比例法，以本加减差，与后度加减差相减，馀数通为秒，与引数小馀相乘，得数为纤，以六十收之，为微、为秒、为分。
视前所得未定加减差数较，少於后数者加之，多於后数者减之，是为加减定差分。
求经度黄道度。
置其日中心行度，以加减定差分加减之，即得。
求七曜置积年入立成内，取总年零年月日下七曜数并之，累去七数，馀即所求白羊宫一日七曜。
如求次宫者，内加各宫七曜数。
如求逐日，累加一数，满七去之。
▲太阴行度
求中心行度置积年入立成内，取总零年月日下中心行度并之，得数，内减一十四分，即所求年白羊宫一日中心行度。
如求逐日，累加日行度。
求加倍相离度置积年入立成内，取总年零年月日下加倍相离度并之，内减二十六分，即所求白羊宫一日度也。
如逐日，累加倍离日行度。
求本轮行度置积年入立成内，取总零年月日下本轮行度并之，内减一四分，即所求白羊宫一日度也。
如求各日，累加本轮日行度。
求第一加减差以加倍相离宫度为引数，入太阴第一加减立成内，取加减差。
又与下差相减，余乘引数小余，得数为秒，以六十收之为分，用加减未定差，得第一分差。
求本轮行度置其日本轮行度，以第一差分加减之。
求第二加减差以本轮行定度度为引数，入太阴第二加减立成内，取未定差，依比例法，求得零数加减之为第二加减差分。
求比数分以们离宫度，入第一加减立成内，取比数分。
如们离零分在三十分已上者，取下度比敷分。
求远近度以本轮行定宫度为引敷，入阴第二加减立成内，取远近度分。
其引数零分，亦依比例法取之。
求凡差定差置比敷分，以远近度通分乘之，以六十约之为分，即凡差。
以凡差加入第二加减差，即为定差。
求经度置其日太阴中心行度，以定差加减之，即太阴经度。
▲太阴纬度
求计都与月相离度置其日太限经度，内减其日计都行度，即计都与月相离度分。
求纬以计都与月相离宫度为引数，入太阴纬度立成，取其度分，依比例法求得零分加减之，得纬度分。求计罗行度置积年入总年零年月日立成内，取罗计中心行度并之，为其年白羊宫一日行度。
求各宫一日，以各宫日行度加之，与十二宫相减，馀即所求宫一日计都行度。
如求计都逐日细行，以前后二段行度相减，馀以相距日数除之，为日差。
又置前段计都行度，以日差累减之。
如求罗喉行度，置其日计都行度内。
▲五星经度
求最高总度数同太阳，依前太阳术求之。
求最高行度置所求本星最高总度，加测定本星最高行度，为其年白羊最高行度。
求扣宫各日，加各宫日行度。
求日中心行度依太阳术求之。
求自行度置积年入立成总零年月日下，各取自行度并之，得其年白羊宫一日自行度。
土、木、金三星减一分，水星减三分，火星不减。
如求各宫各日，照本星自行度累加之。
水星如自行度遇三宫初度，作五日一段算，至九宫初度，作十日一段算纬度亦然。
求中心行度中轮心度土、木、火三星，置太阳中心行度，减其星自行度，为三星中心行度。
内又减最高行度，为三星小轮心度。
金、水二星，其中心行度即太阳中心行度，内减其星最高行度，馀为其星小轮心度。
求第一加减差以其星小轮心宫度为引数，入本星第一加减立成，依比例法求之。
求自行定度及小轮心定度视第一加减差引数，在初宫至五宫，用加减差，加自行度，减小轮心度，各为定度。
在六宫至一宫，用加减差，减自行度，加小轮心度，各为定度。
求第二加减差以其星自行定度，入本第二加减立成内，取其度分，用比例法加减之。
同前。
求比敷分如土、木、金、水星，以本星小轮心一宫度，入第一加减立成内，取比敷分，如引数小馀在三十分已上，取手行经敷分。
如火星，则必用比例法求之。
求远近度以自行定宫度，入第二加减立成内，取远近度，依比例法求之。
求凡差定差法同太阴。
求经度置小轮心定度，以定差加减之，内加其星最高行度。
求留段以其段小轮心，定宫谍为引数，入五星顺退留立成内，於同宫近度，取本星度分，与前后行查减。
又以引数宫度，减立成内同宫近度，两减，馀通分相乘，用六度除之，六十分收之，顺加逆减於前取度分，得数与其日自行定度同者，即本日留。
如自行定度多者已过留日，少者未到留日。
欲得细率，以所得数与其人日自行定度相减，馀以各星一日自行度约之，即得留日在本日前后数也。
求细行分土、木、金、火四星，以前后两段经度相减，以相距除之为日行分。
水星以白羊宫初日经度，又与前一日经度相减，馀为初日行分。
又置前后二段经度相减，馀以相距日除之，为平行分。
与初日行分加减，倍之，以前段前一日与后段相距日数除之之为日差。
以加减初日行分，为日行分。
五星各置前段经度，以逐日行分顺加退减之，为各星逐日经度。
求伏见视各星自行定度，在伏见立成内限度已上者，即五星晨夕伏见也。
五星纬度求自行定度置自行宫度分，其宫以一十乘为度。
其度以二十乘之为分，满六十约之为度。
其分亦以二十乘之为秒，满六十约之属分。
并之即得。求小轮心定度置小轮心宫度分，其宫以五乘之为度。
其度以一十乘之为分，满六十约之迷度。
其分亦以一十乘之为秒，满六十约之为分。
并之即得。
求纬度以小轮心定度及自行度，入本星纬度立成内两取，得数与后行相减。
又以小轮心定立成上小轮心定相减，两减馀相乘，以立成上小轮心度累加数除之。
复以自行定度与立成上自行定度相减，又以两取数，与下行相减，两减馀相乘，以立成上自行度累加数除之，收之为分。与前寄左数相加减，即得黄道南北纬定分。
求纬度细行分置其星前段纬度，与后段纬度相减，馀以相距日除之，为日差。
置前段纬度，以日差顺加退减，即逐日纬度分。
若前后段南北不同者，置其星前后段纬度并之，以相距日除之，为日差。
置前段纬度，以日差累减之，至不及减者，於日差内减之，馀以日差累加之，即得逐日纬度。
推日食法辨日食限视合朔太阴纬度，在黄道南四十五分已下，黄道北九十分已下，为人食。
若合朔为尽，则全见食。
若膈朔在日未出三时及日已入十五分，皆有带食。
若合朔在夜刻者不算。
求食甚凡时即合朔。
置午正太阴行过太阳度，通秒，以二十四乘之为实，置太阴日行度，减太阳日行度，通秒为法，除之为时。时下零数以六下通之为分，分下零数以六十通之为秒，三十秒已上收为一分，六十分收为一时，共为食甚凡时。
求各朔太阳经度以食甚凡时通分，以太阳日行度通秒乘之，以二十四除之为秒，满六十约之为秒分，用加减午正太阳度，得合朔时太阳经度。
求加减分视合朔时太阳宫度，入昼夜加减立成内，取加减分，依比例法求之。
求子正至合朔时分秒置食甚凡时，以加减分分加减之，用加减十二时，即子正至合朔时分秒。
求第一东西差经差。视合朔时，太阳宫在立成右七宫取上行时，在左七宫取下行时，以子正至合朔时，取经差，依比例法求之。
第一东西差。
求第二东西差视合朔时，太阳宫在立成内，取次宫子正至合朔时经差，依比例法求之，为第二东西差。
求第一南北差以合朔时，太阳宫及子正，至合朔时入立成内，取纬差，依比例法求之，为第一南北差。
求第二南北差以合朔太阳宫，取次宫子正至合朔时纬差，依比例法求之，为第二南北差。
求第二时差以膈朔太阳宫及子正至膈朔时，入立成取时差，依比例法求之。
第二时差公合朔太阳宫，取次宫子正至合朔时时差差，依比例法求之。
求合朔时东西差以第一东西差与第二东西差相减，馀通秒，以乘合朔时太阳度分，以三十度除之为纤，以六十收之为微、为秒、为分、经加减第一东西差，为合朔时东西差。
求合朔时南北差以第一南北差与第南北差相减，馀通秒，以乘太阳度分，以三十除之为纤，依率收之为微、秒、分，以加减第一南北差，为各朔时南北差。
求合朔时差以第一第二两时差相减，乘太阳度分，以三十除之，依率帐之，用加减第一时差，为合朔时差。
求合朔时本轮行度以本轮日行度通分，以乘食甚凡时，以二十四除之为秒，依率收之为分、为度，以加减午正本轮行度，为合朔时行度。
求比敷分以本轮行度入立成，取同宫近度太阴比敷分，依比例法求之。
求东西定差置合朔时东西差通秒，以比敷分通秒乘之为纤以六十收之为微、为秒、为分，以加合朔东西差，为定差。
求南北定差法同东西定差。
求食甚定时视其日合朔时，太阳度在立成左七宫，其时差，黑字减，白字加，在右七宫，白字减，黑字加，皆加减於子正至合朔时，得数命起正减之，得某时初正。
馀通为秒，以一千乘之，以一百四下四除之，以六十约之，满百为刻，即食甚定时。
求食甚太阴经度於合朔太阳经度内，加减东西定差，即得食甚太阴经度。
求合朔计都度置食甚凡时通分，以计都日行度通秒乘之，以二十四除之为微，满六十收之为秒、为分，以加减其日午时计都行度，为合朔时计都度。
求合朔太阴纬度食甚时，太降经度内加减合朔时计都度，馀为计都与月相离度，入太阴纬度立成取之。
求食甚太阴纬度南北定差内。加减合朔时太阴纬度，在黄道南加，北减。
得食甚纬度。
求合朔时太阳自行度用太阳日行度通秒，以乘食甚凡时，用二十四除之，得数为微，满六十收之为秒、为分，以加减其日午正自行度，得合朔自行度。
求太阳径分以合朔太阳自行度为引数，入立成内同宫近度，取太阳径分，依比例法求之。
求太阴径分以合朔时本轮行度为引数，入立成同上内取同宫近度太阴径分，依比例法求之。
求二半径分并太阳、太阴雨径分，半之。
求太阳食限分置二半径分，内减食甚太阴纬度，馀为太阳食限。
求太阳食甚定分以太阳食限分通秒，以一千乘之为实，以太阳径分通秒为法除之，以百约之为分，为太阳食甚定分。
求时差食甚太阴纬度通秒自乘，二半径分亦通秒自乘，两自乘数相减，馀以平方开之，以二十四乘之为实，以其日太阴日行度内减太阳日行度通分为法。
实如法而一，得数为分，满六十分为一时，为时差。
求初亏置食甚定时，内减时差，馀时命起子正减之，得初正时。
馀分通秒，以一千乘之，以一百四十四除之，以六十约之，满百为刻，为初亏时刻。
求复圆置食甚定时，内加时差，命起子正，如初亏法，得复圆时刻。
求初亏食甚圆方位与《大统》法同。
推月食法辨月食限视望日太阴经度与罗喉或计都度相离二十三度之内，太阳纬度在一度八分之下，为有食。
又视合望在太阴未出二量，未入二时，其限有带食。
其在二时已上者不算。
求食甚凡时置其日太阴经度内减六宫，以减其日午正太阳度为午前望。置相减馀数相通秒，以二十四乘之为实，置其日太阴经度，内减前一日太阴经度，馀为太阳日行度。
两日行度相减，馀通秒为法，除实得数为时。
其时下馀数，以六十通之为分、秒，即所求食甚凡时。
求食甚月离黄道宫度置食甚凡时，与太阳日行度俱通秒相乘，以二十四除之，得数为纤潢六十收之为微、为秒、为分，以加减其日午正太阳度，为望时太阳度，加六宫，即得所求。
求昼夜加减差以望时太阳宫度为引数，入昼夜加减立成内，取加减分，依比例法求之。
求食甚定时置食甚凡时，以昼夜加减差法加减之。
得数，用加减一十二时，命起子正，得初正时。
其小馀，如法收为刻，法详日食。
得定时。
求望时计都度置食甚凡时，通秒为实，以计都日行度通秒乘之，以二十四除之，得数为纤以六十收之为微、为秒、为分，用加减其日午正计都行度，即得。
求望时太阴纬度置食甚月离黄道度，内减望时计都度，馀为计都与月相离度，入太阴纬度立成取之。
求望时本轮行度置太阴本轮日行度，通分，以食甚凡时通秒乘之，以二十四除之为微，以六十收之为秒、为分、为度，用加减其日午正本轮行度，即得。
求太阴径分以望时本轮行宫度，入影径分立成求之。
求太阴影径分以望时本轮行宫度，放影径分立成，取之。
求望时太阳自行度以太阳日行度与食甚凡时俱通秒相乘，以二十四除之，得数为纤，满六十收为微、为秒、为分，以减其日午正太阳自行度。
求影径减差以其日太阳自行範度为引数，入影径立成内，於同宫近度取太阴影径差分，依比例法求之。
求影径定分置太阴影径分，内减影径减差分。
求二半径分置太阴径分，加影径定分，半之。
求太阴食限置二半径分，内减望时太阴纬度。
求食甚定分置食限分，通秒，以一千乘之为实，以太阴径分秒为法，除之，以百约之灾分，为食甚定分。
求太阴逐时行过太阳分置太阴望时经度，减前一日太阴经度，又置望时太阳自行度，减前一日太阳自行度，以两馀数相减，为太阴昼夜行过太阳度。
通秒以二十四除之，满六十收之，得逐时行过太阳分。
求时差以太阴纬度分，通秒自乘，又以二半径分通秒自乘，两数相减，馀开平方为实，以太阴行过太阳度通秒为法除之，得数即时刻差。
求初亏复圆时刻以时差减食甚定时，得初亏时刻。
加食甚定时，得复圆时刻。
其命时收刻之法，并同日食。
求食既至食甚时差置二半径分，减太阴径分，通秒自乘，又置太阴纬度亦通秒自乘，相减，平方开之为实。
以太阴逐时行过太阳度通秒为法除之，得数即时差。
求食既生光时刻以食既至食甚时差，减食甚定时，为食既时刻。
加食甚定时，为生光时刻。
求初亏食甚复圆方位与《大统》法同。
求日出入时以午正太阳经度为引数，入西域昼夜时立成，取其度分，依比例法求之，为未定分。
又引於数相对宫度内，取其度分，亦依比例法求之，为后未定分。
两未定分相减，不及减，馀通秒，用十五除之，六十收之为分、为时，得其日昼时分秒。
半之为其日半昼时分秒。
以半昼时分秒减十二时，馀为日出时分秒，加十二时为日入时分秒。
求日月出入带食分秒视其日日出时分秒，较多於初亏时分秒，少於食甚定时及复时分秒者，即有带食。
置其日日出时或日入时，与食甚定时分秒相减，馀为带食差。
置日月食甚定分，以带食差通秒乘之，以时差通秒除之，得数为带食分。
於食甚定分内减带食分，馀为日月带食所见之分。
求月食更点置二十四时，内减昼时，又减晨昏时，馀不夜时，通秒五约之为更法。
寺分更法为点法。
如食在子正以前者，置初亏食甚复圆等时，内减日入时，又减半晨昏时，馀通就，以更法减之为更数。
不满更法者，以点法减之为点数。
食在子正已后者，置夜时半之，加初亏食甚复圆等时，以更法减之为更数。
不满更法者，以点法减之为点数。
皆命起初更、初点。
▲太阴五星凌犯求太阴昼夜行度以本日经度与次日经度相减，馀即本日昼夜行度。
求太阴晨昏刻度置其日午太阴经度，内加立成其日昏刻加差，即为其日太阴昏刻经度。
置其次日午正太阴经度，减立成其日晨刻减差，即为其日太阴晨刻经度。
求月出入度置其日午正太阴经度，加立成内即前立成其日月入加差，即为其日月入时太阴经度。
加立成内其日月出加差，即其日月出时太阴经度。
耱太阴所犯星座朔后视昏刻度至月入度，望后视月出度至晨刻度，入黄道南北各像星立成内，经纬度相近在一度已下者，取之。
求时刻置其日午正太阴经度，与取到各像星经度相减，通分，以二十四乘之，以太阴昼夜行度亦通分除之，得初正时。
其小馀，以六十通之为分，以一竿千乘之，一百国十四除之，以百约之为刻，即得所求时刻。
求上下相离分置太阴纬度与年犯星纬度相减，馀为上下相离分。
若月星同在南，月多为下离。
同在北，月多为上离，下为下离。
若南北不同，月在北为上离，南为下离。
求五星凌犯各星相离置其日五星经纬度，入黄道立成内，视各像内外星经纬度，在一度已下和取之。
其五星纬度与各星纬度相减，馀即上下相离分。
求月犯五星，五星相犯视太阴经纬度，五星经纬度相近在一度已下者，取之。
