大凡在敌我双方各守自己疆界的情况下，如果敌人进犯我边界，袭扰我边民时，可在边界要害之处埋设伏兵，或者构筑障碍要塞用以拦截敌人。这样，敌人一定不敢轻率来犯。
诚如兵法所说： 能使敌人无法达到其预定目标的，是我设置重重障碍妨害它的缘故。 
唐朝中宗神龙三年，朔方军总管沙吒忠义被突厥军打败，朝廷下诏派张仁愿任御史大夫去接替他打突厥军。
张仁愿抵达任所时，突厥兵已经退走，于是他便率军跟踪追击，乘夜偷袭，击败了突厥军。
在此之前，唐朝朔方军与突厥是以黄河为分界的。黄河北岸有个拂云祠，突厥首领每次率兵南下侵犯边界，必定先到该祠祷告以求神灵保佑，然后再引兵渡过黄河南下。
张仁愿刚来这里时，恰值突厥可汗默啜率领全军西向进攻突骑施，仁愿奏请中宗批准其率兵乘突厥内部空虚之隙而攻取了漠南地区，并于黄河以北修筑东、中、西三座受降城，以此切断敌人南犯的进军道路。
但此请求却遭到了尚书右仆射唐休璟的反对，他认为： 自两汉以来，国家在这个地区都是以北守黄河为限，如今却要筑城于敌人腹地之中，最终结果还是为敌人所占有。 
为此，张仁愿一再上表申述自己的请求，唐中宗最后终于批准了他筑城的请求。
仁愿还上表请求准许其把服役期满即将返乡的士兵留下帮助筑城。当时有咸阳籍镇兵二百人怠工逃跑，仁愿派人抓回后全部杀死在城下，全军上下都为之所震慑。
自此以后，参加筑城的人都很卖力，仅用六十天就将三座城垒修好了：以拂云祠处的筑城为中受降城，向南直通朔方镇；西受降城向南直通灵武镇；东受降城向南直通榆林镇。
三座城间各相距四百余里，其北面是大沙漠，这样为国家拓宽疆土三百里远。
同时，又在牛头朝那山北设置烽火瞭望台一千八百个。
从此，突厥人不敢越山牧马，朔方也看不到敌兵的踪迹。
每年能节银以亿计算，缩减镇兵几万人。
