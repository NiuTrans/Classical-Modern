○方程（以御错糅正负）今有上禾三秉，中禾二秉，下禾一秉，实三十九斗；上禾二秉，中禾三秉，下禾一秉，实三十四斗；上禾一秉，中禾二秉，下禾三秉，实二十六斗。问上、中、下禾实一秉各几何？答曰：上禾一秉九斗四分斗之一。中禾一秉四斗四分斗之一。下禾一秉二斗四分斗之三。
方程〔程，课程也。群物总杂，各列有数，总言其实。令每行为率。二物者再程，三物者三程，皆如物数程之。并列为行，故谓之方程。行之左右无所同存，且为有所据而言耳。此都术也，以空言难晓，故特系之禾以决之。又列中、左行如右行也。〕术曰：置上禾三秉，中禾二秉，下禾一秉，实三十九斗于右方。中、左禾列如右方。以右行上禾遍乘中行，而以直除。
〔为术之意，令少行减多行，反复相减，则头位必先尽。上无一位，则此行亦阙一物矣。然而举率以相减，不害余数之课也。若消去头位，则下去一物之实。
如是叠令左右行相减，审其正负，则可得而知。先令右行上禾乘中行，为齐同之意。为齐同者，谓中行直减右行也。从简易虽不言齐同，以齐同之意观之，其义然矣。〕又乘其次，亦以直除。
〔复去左行首。〕然以中行中禾不尽者遍乘左行，而以直除。
〔亦令两行相去行之中禾也。〕左方下禾不尽者，上为法，下为实。实即下禾之实。
〔上、中禾皆去，故余数是下禾实，非但一秉。欲约众秉之实，当以禾秉数为法。列此，以下禾之秉数乘两行，以直除，则下禾之位皆决矣。各以其余一位之秉除其下实。即计数矣用算繁而不省。所以别为法，约也。然犹不如自用其旧。
广异法也。〕求中禾，以法乘中行下实，而除下禾之实。
〔此谓中两禾实，下禾一秉实数先见，将中秉求中禾，其列实以减下实。而左方下禾虽去一，以法为母，于率不通。故先以法乘，其通而同之。俱令法为母，而除下禾实。以下禾先见之实令乘下禾秉数，即得下禾一位之列实。减于下实，则其数是中禾之实也。〕余，如中禾秉数而一，即中禾之实。
〔余，中禾一位之实也。故以一位秉数约之，乃得一秉之实也。〕求上禾，亦以法乘右行下实，而除下禾、中禾之实。
〔此右行三禾共实，合三位之实。故以二位秉数约之，乃得一秉之实。今中下禾之实其数并见，令乘右行之禾秉以减之。故亦如前各求列实，以减下实也。〕余，如上禾秉数而一，即上禾之实。实皆如法，各得一斗。
〔三实同用，不满法者，以法命之。母、实皆当约之。〕今有上禾七秉，损实一斗，益之下禾二秉，而实一十斗；下禾八秉，益实一斗，与上禾二秉，而实一十斗。问上、下禾实一秉各几何？答曰：上禾一秉实一斗五十二分斗之一十八。下禾一秉实五十二分斗之四十一。
术曰：如方程。损之曰益，益之曰损。
〔问者之辞虽？今按：实云上禾七秉，下禾二秉，实一十一斗；上禾二秉，下禾八秉，实九斗也。 损之曰益 ，言损一斗，余当一十斗；今欲全其实，当加所损也。 益之曰损 ，言益实以一斗，乃满一十斗；今欲知本实，当减所加，即得也。〕损实一斗者，其实过一十斗也；益实一斗者，其实不满一十斗也。
〔重谕损益数者，各以损益之数损益之也。〕今有上禾二秉，中禾三秉，下禾四秉，实皆不满斗。上取中、中取下、下取上各一秉而实满斗。问上、中、下禾实一秉各几何？答曰上禾一秉实二十五分斗之九。中禾一秉实二十五分斗之七。下禾一秉实二十五分斗之四。
术曰：如方程。各置所取。
〔置上禾二秉为右行之上，中禾三秉为中行之中，下禾四秉为左行之下，所取一秉及实一斗各从其位。诸行相借取之物皆依此例。〕以正负术入之。
正负术曰：〔今两算得失相反，要令正负以名之。正算赤，负算黑，否则以邪正为异。
方程自有赤、黑相取，法、实数相推求之术。而其并减之势不得广通，故使赤、黑相消夺之，于算或减或益。同行异位殊为二品，各有并、减之差见于下焉。著此二条，特系之禾以成此二条之意。故赤、黑相杂足以定上下之程，减、益虽殊足以通左右之数，差、实虽分足以应同异之率。然则其正无入以负之，负无入以正之，其率不妄也。〕同名相除，〔此谓以赤除赤，以黑除黑，行求相减者，为去头位也。然则头位同名者，当用此条，头位异名者，当用下条。〕异名相益，〔益行减行，当各以其类矣。其异名者，非其类也。非其类者，犹无对也，非所得减也。故赤用黑对则除，黑；无对则除，黑；黑用赤对则除，赤；无对则除，赤；赤黑并于本数。此为相益之，皆所以为消夺。消夺之与减益成一实也。
术本取要，必除行首。至于他位，不嫌多少，故或令相减，或令相并，理无同异而一也。〕正无入负之，负无入正之。
〔无入，为无对也。无所得减，则使消夺者居位也。其当以列实或减下实，而行中正负杂者亦用此条。此条者，同名减实，异名益实，正无入负之，负无入正之也。〕其异名相除，同名相益，正无入正之，负无入负之。
〔此条异名相除为例，故亦与上条互取。凡正负所以记其同异，使二品互相取而已矣。言负者未必负于少，言正者未必正于多。故每一行之中虽复赤黑异算无伤。然则可得使头位常相与异名。此条之实兼通矣，遂以二条反覆一率。观其每与上下互相取位，则随算而言耳，犹一术也。又，本设诸行，欲因成数以相去耳。故其多少无限，令上下相命而已。若以正负相减，如数有旧增法者，每行可均之，不但数物左右之也。〕今有上禾五秉，损实一斗一升，当下禾七秉；上禾七秉，损实二斗五升，当下禾五秉。问上、下禾实一秉各几何？答曰：上禾一秉五升。下禾一秉二升。
术曰：如方程。置上禾五秉正，下禾七秉负，损实一斗一升正。
〔言上禾五秉之实多，减其一斗一升，余，是与下禾七秉相当数也。故互其算，令相折除，以一斗一升为差。为差者，上禾之余实也。〕次置上禾七秉正，下禾五秉负，损实二斗五升正。以正负术入之。
〔按：正负之术，本设列行，物程之数不限多少，必令与实上下相次，而以每行各自为率。然而或减或益，同行异位，殊为二品，各自并、减，之差见于下也。〕今有上禾六秉，损实一斗八升，当下禾一十秉；下禾一十五秉，损实五升，当上禾五秉。问上、下禾实一秉各几何？答曰：上禾一秉实八升。下禾一秉实三升。
术曰：如方程。置上禾六秉正，下禾一十秉负，损实一斗八升正。次，上禾五秉负，下禾一十五秉正，损实五升正。以正负术入之。
〔言上禾六秉之实多，减损其一斗八升，余是与下禾十秉相当之数。故亦互其算，而以一斗八升为差实。差实者，上禾之余实。〕今有上禾三秉，益实六斗，当下禾一十秉；下禾五秉，益实一斗，当上禾二秉。问上、下禾实一秉各几何？答曰：上禾一秉实八斗。下禾一秉实三斗。
术曰：如方程。置上禾三秉正，下禾一十秉负，益实六斗负。次置上禾二秉负，下禾五秉正，益实一斗负。以正负术入之。
〔言上禾三秉之实少，益其六斗，然后于下禾十秉相当也。故亦互其算，而以六斗为差实。差实者，下禾之余实。〕今有牛五，羊二，直金十两；牛二，羊五，直金八两。问牛、羊各直金几何？答曰：牛一直金一两二十一分两之一十三。羊一直金二十一分两之二十。
术曰：如方程。
〔假令为同齐，头位为牛，当相乘。右行定，更置牛十，羊四，直金二十两；左行：牛十，羊二十五，直金四十两。牛数等同，金多二十两者，羊差二十一使之然也。以少行减多行，则牛数尽，惟羊与直金之数见，可得而知也。以小推大，虽四五行不异也。〕今有卖牛二，羊五，以买一十三豕，有余钱一千；卖牛三，豕三，以买九羊，钱适足；卖六羊，八豕，以买五牛，钱不足六百。问牛、羊、豕价各几何？答曰牛价一千二百。羊价五百。豕价三百。
术曰：如方程。置牛二，羊五正，豕一十三负，余钱数正；次，牛三正，羊九负，豕三正；次五牛负，六羊正，八豕正，不足钱负。以正负术入之。
〔此中行买、卖相折，钱适足，故但互买卖算而已。故下无钱直也。设欲以此行如方程法，先令二牛遍乘中行，而以右行直除之。是故终于下实虚缺矣。故注曰正无实负，负无实正，方为类也。方将以别实加适足之数与实物作实。
盈不足章 黄金白银 与此相当。 假令黄金九，白银一十一，称之重适等。
交易其一，金轻十三两。问金、银一枚各重几何？ 与此同。〕今有五雀六燕，集称之衡，雀俱重，燕俱轻。一雀一燕交而处，衡适平。并雀、燕重一斤。问雀、燕一枚各重几何？答曰：雀重一两一十九分两之一十三。
燕重一两一十九分两之五。
术曰：如方程。交易质之，各重八两。
〔此四雀一燕与一雀五燕衡适平，并重一斤，故各八两。列两行程数。左行头位其数有一者，令右行遍除。亦可令于左行而取其法、实于左。左行数多，以右行取其数。左头位减尽，中、下位算当燕与实。右行不动。左上空，中法，下实，即每枚当重宜可知也。按：此四雀一燕与一雀五燕其重等，是三雀、四燕重相当。雀率重四，燕率重三也。诸再程之率皆可异术求也，即其数也。〕今有甲、乙二人持钱不知其数。甲得乙半而钱五十，乙得甲太半而亦钱五十。
问甲、乙持钱各几何？答曰：甲持三十七钱半。乙持二十五钱。
术曰：如方程。损益之。
〔此问者言一甲，半乙而五十；太半甲，一乙亦五十也。各以分母乘其全，内子。行定：二甲，一乙而钱一百；二甲，三乙而钱一百五十。于是乃如方程。
诸物有分者放此。〕今有二马，一牛，价过一万，如半马之价；一马，二牛，价不满一万，如半牛之价。问牛、马价各几何？答曰：马价五千四百五十四钱一十一分钱之六。牛价一千八百一十八钱一十一分钱之二。
术曰：如方程。损益之。
〔此一马半与一牛价直一万也，二牛半与一马亦直一万也。一马半与一牛直钱一万，通分内子，右行为三马，二牛，直钱二万。二牛半与一马直钱一万，通分内子，左行为二马，五牛，直钱二万也。〕今有武马一匹，中马二匹，下马三匹，皆载四十石至阪，皆不能上。武马借中马一匹，中马借下马一匹，下马借武马一匹，乃皆上。问武、中、下马一匹各力引几何？答曰：武马一匹力引二十二石七分石之六。中马一匹力引一十七石七分石之一。下马一匹力引五石七分石之五。
术曰：如方程。各置所借，以正负术入之。
今有五家共井，甲二绠不足，如乙一绠。乙三绠不足，以丙一绠；丙四绠不足，以丁一绠；丁五绠不足，以戊一绠；戊六绠不足，以甲一绠。如各得所不足一绠，皆逮。问井深、绠长各几何？答曰：井深七丈二尺一寸。甲绠长二丈六尺五寸。乙绠长一丈九尺一寸。丙绠长一丈四尺八寸。丁绠长一丈二尺九寸。戊绠长七尺六寸。
术曰：如方程。以正负术入之。
〔此率初如方程为之，名各一逮井。其后，法得七百二十一，实七十六，是为七百二十一绠而七十六逮井，并用逮之数。以法除实者，而戊一绠逮井之数定，逮七百二十一分之七十六。是故七百二十一为井深，七十六为戊绠之长，举率以言之。〕今有白禾二步，青禾三步，黄禾四步，黑禾五步，实各不满斗。白取青、黄，青取黄、黑，黄取黑、白，黑取白、青，各一步，而实满斗。问白、青、黄、黑禾实一步各几何？答曰：白禾一步实一百一十一分斗之三十三。青禾一步实一百一十一分斗之二十八。黄禾一步实一百一十一分斗之一十七。黑禾一步实一百一十一分斗之一十。
术曰：如方程。各置所取，以正负术入之。
今有甲禾二秉，乙禾三秉，丙禾四秉，重皆过于石。甲二重如乙一，乙三重如丙一，丙四重如甲一。问甲、乙、丙禾一秉各重几何？答曰：甲禾一秉重二十三分石之一十七。乙禾一秉重二十三分石之一十一。丙禾一秉重二十三分石之一十。
术曰：如方程。置重过于石之物为负。
〔此问者言甲禾二秉之重过于一石也。其过者何云？如乙一秉重矣。互其算，令相折除，而一以石为之差实。差实者，如甲禾余实。故置算相与同也。〕以正负术入之。
〔此入，头位异名相除者，正无入正之，负无入负之也。〕今有令一人，吏五人，从者一十人，食鸡一十；令一十人，吏一人，从者五人，食鸡八；令五人，吏一十人，从者一人，食鸡六。问令、吏、从者食鸡各几何？答曰令一人食一百二十二分鸡之四十五。吏一人食一百二十二分鸡之四十一。
从者一人食一百二十二分鸡之九十七。
术曰：如方程。以正负术入之。
今有五羊，四犬，三鸡，二兔，直钱一千四百九十六；四羊，二犬，六鸡，三兔，直钱一千一百七十五；三羊，一犬，七鸡，五兔，直钱九百五十八；二羊，三犬，五鸡，一兔，直钱八百六十一。问羊、犬、鸡、兔价各几何？答曰：羊价一百七十七。犬价一百二十一。鸡价二十三。兔价二十九。
术曰：如方程。以正负术入之。
今有麻九斗，麦七斗，菽三斗，荅二斗，黍五斗，直钱一百四十；麻七斗，麦六斗，菽四斗，荅五斗，黍三斗，直钱一百二十八；麻三斗，麦五斗，菽七斗，荅六斗，黍四斗，直钱一百一十六；麻二斗，麦五斗，菽三斗，荅九斗，黍四斗，直钱一百一十二；麻一斗，麦三斗，菽二斗，荅八斗，黍五斗，直钱九十五。问一斗直几何？荅曰：麻一斗七钱。麦一斗四钱。菽一斗三钱。荅一斗五钱。黍一斗六钱。
术曰：如方程。以正负术入之。
〔此麻麦与均输、少广之章重衰、积分皆为大事。其拙于精理徒按本术者，或用算而布毡，方好烦而喜误，曾不知其非，反欲以多为贵。故其算也，莫不暗于设通而专于一端。至于此类，苟务其成，然或失之，不可谓要约。更有异术者，庖丁解牛，游刃理间，故能历久其刃如新。夫数，犹刃也，易简用之则动中庖丁之理。故能和神爱刃，速而寡尤。凡九章为大事，按法皆不尽一百算也。虽布算不多，然足以算多。世人多以方程为难，或尽布算之象在缀正负而已，未暇以论其设动无方，斯胶柱调瑟之类。聊复恢演，为作新术，著之于此，将亦启导疑意。
网罗道精，岂传之空言？记其施用之例，著策之数，每举一隅焉。
方程新术曰：以正负术入之。令左、右相减，先去下实，又转去物位，则其求一行二物正负相借者，是其相当之率。又令二物与他行互相去取，转其二物相借之数，即皆相当之率也。各据二物相当之率，对易其数，即各当之率也。更置成行及其下实，各以其物本率今有之，求其所同。并，以为法。其当相并而行中正负杂者，同名相从，异名相消，余，以为法。以下置为实。实如法，即合所问也。一物各以本率今有之，即皆合所问也。率不通者，齐之。
其一术曰：置群物通率为列衰。更置成行群物之数，各以其率乘之，并，以为法。其当相并而行中正负杂者，同名相从，异名相消，余为法。以成行下实乘列衰，各自为实。实如法而一，即得。
以旧术为之。凡应置五行。今欲要约，先置第三行，减以第四行，又减第五行；次置第二行，以第二行减第一行，又减第四行。去其头位；余，可半；次置右行及第二行。去其头位；次以右行去第四行头位，次以左行去第二行头位，次以第五行去第一行头位；次以第二行去第四行头位；余，可半；以右行去第二行头位，以第二行去第四行头位。余，约之为法、实。实如法而一，得六，即有黍价。以法治第二行，得荅价，右行得菽价，左行得麦价，第三行麻价。如此凡用七十七算。
以新术为此。先以第四行减第三行；次以第三行去右行及第二行、第四行下位，又以减左行下位，不足减乃止；次以左行减第三行下位，次以第三行去左行下位。讫，废去第三行。次以第四行去左行下位，又以减右行下位；次以右行去第二行及第四行下位；次以第二行减第四行及左行头位；次以第四行减左行菽位，不足减乃止；次以左行减第二行头位，余，可再半；次以第四行去左行及第二行头位，次以第二行去左行头位，余，约之，上得五，下得三，是菽五当荅；次以左行去第二行菽位，又以减第四行及右行菽位，不足减乃止；次以右行减第二行头位，不足减乃止；次以第二行去右行头位，次以左行去右行头位；余，上得六，下得五，是为荅六当黍五；次以左行去右行荅位，余，约之，上为二，下为一；次以右行去第二行下位，以第二行去第四行下位，又以减左行下位；次，左行去第二行下位，余，上得三，下得四，是为麦三当菽四；次以第二行减第四行下位；次以第四行去第二行下位；余，上得四，下得七，是为麻四当麦七。是为相当之率举矣。据麻四当麦七，即麻价率七而麦价率四；又麦三当菽四，即为麦价率四而菽价率三；又菽五当荅三，即为菽价率三而荅价率五；又荅六当黍五，即为荅价率五而黍价率六；而率通矣。更置第三行，以第四行减之，余有麻一斗，菽四斗正，荅三斗负，下实四正。求其同为麻之数，以菽率三、荅率五各乘其斗数，如麻率七而一，菽得一斗七分斗之五正，荅得二斗七分斗之一负。则菽、荅化为麻。以并之，令同名相从，异名相消，余得定麻七分斗之四，以为法。置四为实，而分母乘之，实得二十八，而分子化为法矣以法除得七，即麻一斗之价。置麦率四、菽率三、荅率五、黍率六，皆以麻乘之，各自为实。以麻率七为法。所得即各为价。亦可使置本行实与物同通之，各以本率今有之，求其本率所得。并，以为法。如此，即无正负之异矣，择异同而已。又可以一术为之。置五行通率，为麻七、麦四、菽三、荅五、黍六，以为列衰。成行麻一斗，菽四斗正，荅三斗负，各以其率乘之。讫，令同名相从，异名相消，余为法。又置下实乘列衰，所得各为实。此可以置约法，则不复乘列衰，各以列衰为价。如此则凡用一百二十四算也。〕
